<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 
      
<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">

<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value="Control de Asistencia /Sancion/Reporte" />
		</ui:include>
</ui:define>
		<ui:define name="cuerpo">
		<style type="text/css">

.ui-datepicker-calendar {
    display: none;
}



</style>
<script language="JavaScript">
function regenererCal(){
    year = $("#frmReporteVacaciones\\:calendrierDateDebut .ui-datepicker-year").val();
    month = $("#frmReporteVacaciones\\:calendrierDateDebut .ui-datepicker-month").val();
    $('#frmReporteVacaciones\\:calendrierDateDebut_input').val(year + '-' + ('0' + (++month)).slice(-2) + '-01');
}
</script>
	<h:form  id="frmReporteVacaciones" enctype="multipart/form-data" acceptcharset="UTF-8" >
	<p:panel id="pnlReporteVacaciones"  header="Generar Reporte" style="margin-bottom: 10px;">
	
<div class="grid condensed">
				<!-- ******************** FILA NUMERO 1 ************************ -->
				<div class="row cells8"> 
					<div class="cell colspan4"><!-- NNOMBRES -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblAnioRepSan" for="calendarSanInicio" value="Año:"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:calendar  id="calendarSanInicio" value="#{reporteSanciones.fecha}"
                pattern="yyyy-MM-dd" effect="slideDown" navigator="true" mode="inline" 
                  />
     	
		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgAnioReporteVac" for="calendarSanInicio" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					
									<div class="cell colspan4"><!-- Sanciones -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblAusenciaRepVac" for="tpSanciones" value="Tipo de Sanció n"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:selectOneMenu id="tpSanciones"
										value="#{reporteSanciones.tpSacion}" effect="fold">
										<f:selectItem itemLabel="Seleccionar" itemValue="0" />
										<f:selectItems value="#{reporteSanciones.tpSanciones}" />
									
									</p:selectOneMenu>
		       				 
    

		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgAusencReporteVac" for="tpSanciones" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					<div class="cell colspan4"><!-- Sanciones -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblRegienRepSan" for="cmbRegimenRepSan" value="Régimen"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:selectOneMenu id="cmbRegimenRepSan"
										value="#{reporteSanciones.regimen}" effect="fold">
										<f:selectItem itemLabel="Seleccionar" itemValue="0" />
										<f:selectItems value="#{reporteSanciones.regimens}" />
									
									</p:selectOneMenu>
		       				 
    

		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgAusencReporteVac" for="cmbRegimenRepSan" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					
					</div>
					
	<br/>
				<p:commandButton id="btnCalcularVacacion"  value="Buscar" onclick="regenererCal()"  actionListener="#{reporteVacaciones.BuscarVacacionesFiltros()}" update="frmReporteVacaciones tblRepVacaciones" style="margin-left: 9%;margin-bottom: 1%;"> </p:commandButton>
				<br/>
						<div id="divTblReportesSanc" >
	<p:dataTable id="tblRepSanciones" var="repSanc" value="#{reporteSanciones.lstDtSanciones}"
	widgetVar="reportSancTable"
	 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
                 paginator="true" rows="10" style="margin-bottom:20px">
                 <f:facet name="{Exporters}">
                <h:commandLink value="Exportar">
        <p:graphicImage name="img/excel.jpg"/>
        <p:dataExporter type="xls" target="tblRepSanciones" fileName="Vacaciones" pageOnly="true"/>
    </h:commandLink>
    </f:facet>
                 

	 
        <p:column headerText="Cédula">
            <p:outputLabel value="#{repVac.vccNumAutorizacion}"></p:outputLabel>  
        </p:column>
        <p:column headerText="Nombres">
            <h:outputText value="#{repVac.detallePuesto.fichaEmpleado.persona.nombresCompetos()}" />
        </p:column>                                                                                                                                               
        <p:column headerText="Apellidos">
            <h:outputText value=""/>
        </p:column>
          <p:column headerText="Fecha Emisión">
            <h:outputText value="#{repVac.vccFechaEmision}"/>
        </p:column> 
        <p:column headerText="Fecha Inicio">
            <h:outputText value="#{repVac.vccFechaInicio}" />
        </p:column>
         
        <p:column headerText="Fecha Fin">
            <h:outputText value="#{repVac.vccFechaFin}" />
        </p:column>
        <p:column headerText="Fecha Fin">
            <h:outputText value="#{repVac.vccFechaFin}" />
        </p:column>
        
        <p:column headerText="Dependencia" >
         <f:facet name="filter">
                <p:selectCheckboxMenu label="Dependencias" onchange="PF('reportAuscenTable').filter()" panelStyle="width:125px" scrollHeight="150"  footerText="in" filterMatchMode="in">
                    <f:selectItems value="#{reporteVacaciones.dependencia}" />
                </p:selectCheckboxMenu>
            </f:facet>
            <h:outputText value="#{repVac.detallePuesto.dependencia.dpnDescripcion}" />
        </p:column>
         <p:column headerText="Regimen" >
           <f:facet name="filter">
                <p:selectCheckboxMenu label="Regimen" onchange="PF('reportAuscenTable').filter()" panelStyle="width:125px" scrollHeight="150" footerText="in" filterMatchMode="in">
                    <f:selectItems value="#{reporteVacaciones.regimen}" />
                </p:selectCheckboxMenu>
            </f:facet>
            <h:outputText value="#{repVac.detallePuesto.puesto.grupoOcupacional.regimen.rgmDescripcion}"/>
        </p:column>
        
         <p:column headerText=" Tipo Ausencia">
            <h:outputText value="Regimen"/>
        </p:column>
       
	</p:dataTable>
	
	</div>
	
	<div id="divTblRegistrosLicencias">
						<p:dataTable var="licencia" rendered="#{reporteVacaciones.licActivar}"
							value="#{reporteVacaciones.lstLicencias}"
							widgetVar="reportAuscenTableLic"
	 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
                 paginator="true" rows="10" style="margin-bottom:20px"
							>
							   <f:facet name="{Exporters}">
                <h:commandLink value="Exportar">
        <p:graphicImage name="img/excel.jpg"/>
        <p:dataExporter type="xls" target="reportAuscenTableLic" fileName="Licencias" pageOnly="true"/>
    </h:commandLink>
    </f:facet>
							<p:column headerText="Tipo Licencia">
								<h:outputText value="#{licencia.tipoLicencia.tplcNombre}" />
							</p:column>
							<p:column headerText="Nº días">
								<h:outputText value="#{licencia.lcnNumDias}" />
							</p:column>
							<p:column headerText="Fecha Inicio">
								<h:outputText value="#{licencia.lcnFechaInicio}" />
							</p:column>
							<p:column headerText="Fecha Fin">
								<h:outputText value="#{licencia.lcnFechaFin}" />
							</p:column>
							<p:column headerText="Explicación">
								<h:outputText value="#{licencia.lcnExplicacion}" />
							</p:column>
							
						
							
						</p:dataTable>
					</div>
							<div id="divTblRegistrosPermisos">
								<p:dataTable var="permiso" value="#{reporteVacaciones.lstPermisos}" rendered="#{reporteVacaciones.permActivar}"
								widgetVar="reportAuscenTablePerm"
	 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
                 paginator="true" rows="10" style="margin-bottom:20px">
								
								<f:facet name="{Exporters}">
                <h:commandLink value="Exportar">
        <p:graphicImage name="img/excel.jpg"/>
        <p:dataExporter type="xls" target="reportAuscenTablePerm" fileName="Permisos" pageOnly="true"/>
    </h:commandLink>
    </f:facet>
									<p:column headerText="Fecha Permiso">
										<h:outputText value="#{permiso.prmFechaPermiso}" />
									</p:column>
									<p:column headerText="Nº Días">
										<h:outputText value="#{permiso.prmNumDias}" />
									</p:column>
									<p:column headerText="Nº Horas">
										<h:outputText value="#{permiso.prmNumHoras}" />
									</p:column>
									<p:column headerText="A partir de">
										<h:outputText value="#{permiso.prmHoraInicio}" />
									</p:column>
									<p:column>
										<f:facet name="header">
											<i class="fa fa-check-square-o" />
										</f:facet>
										<p:commandButton value="Ver/Editar">

										</p:commandButton>
										<p:commandButton value="Imprimir"></p:commandButton>
									</p:column>

								</p:dataTable>
								</div>	
</div>
	</p:panel>
	</h:form>
	
	</ui:define> 
	</ui:composition>
	
</html>