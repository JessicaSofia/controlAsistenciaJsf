<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 
      
<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">

<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value="Control de Asistencia /Sancion/Reporte" />
		</ui:include>
</ui:define>
		<ui:define name="cuerpo">
		<style type="text/css">

.ui-datepicker-calendar {
    display: none;
}



</style>
<script language="JavaScript">
function regenererCalSancion(){
    year = $("#frmReporteSanciones\\:calendarSanInicio .ui-datepicker-year").val();
    month = $("#frmReporteSanciones\\:calendarSanInicio .ui-datepicker-month").val();
    $('#frmReporteSanciones\\:calendarSanInicio_input').val(year + '-' + ('0' + (++month)).slice(-2) + '-01');
}
</script>
	<h:form  id="frmReporteSanciones" enctype="multipart/form-data" acceptcharset="UTF-8" >
	<p:panel id="pnlReporteSanciones"  header="Generar Reporte" style="margin-bottom: 10px;">
	
<div class="grid condensed">
				<!-- ******************** FILA NUMERO 1 ************************ -->
				<div class="row cells8"> 
					<div class="cell colspan4"><!-- Tipo Reporte -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lbltipoRepSan" for="calendarSanInicio" value="Tipo de Reporte:"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				  <p:selectOneRadio id="rdTipoReporte" value="#{reporteSanciones.tipoReporte}">
            <f:selectItem itemLabel="Mensual" itemValue="1" />
            <f:selectItem itemLabel="Anual" itemValue="2" />
            <p:ajax update="frmReporteSanciones" />
           
        </p:selectOneRadio>
		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgTipoReporteReporteVac" for="rdTipoReporte" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					<div class="cell colspan4"><!-- Sanciones -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblAusenciaRepVac" for="tpSanciones" value="Tipo de Sanción"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:selectOneMenu id="tpSanciones"
										value="#{reporteSanciones.tpSacion}" effect="fold">
										<f:selectItem itemLabel="Seleccionar" itemValue="0" />
										<f:selectItems value="#{reporteSanciones.tpSanciones}" />
									
									</p:selectOneMenu>
		       				 
    

		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgTpSanReporteSan" for="tpSanciones" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					
					</div>
		
				<div class="row cells8"> 
					<div class="cell colspan2"  ><!-- segunda fila-->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml" >
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblAnioRepSan" for="calendarSanInicio" value="Desde:"  />	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:calendar  id="calendarSanInicio" value="#{reporteSanciones.fecha}" 
                pattern="yyyy-MM-dd" effect="slideDown" navigator="true" mode="inline" 
                  />
     	
		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgSanInicionReporteVac" for="calendarSanInicio" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					
					<div class="cell colspan2"><!-- Fecha Fin-->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFinRepSan" for="calendarSanFin" value="Hasta:" rendered="#{reporteSanciones.anualActv}" />	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:calendar  id="calendarSanFin" value="#{reporteSanciones.fecha}" rendered="#{reporteSanciones.anualActv}"
                pattern="yyyy-MM-dd" effect="slideDown" navigator="true" mode="inline" 
                  />
     	
		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgSanFinReporteVac" for="calendarSanFin" rendered="#{reporteSanciones.anualActv}" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					
														<div class="cell colspan4"><!-- Sanciones -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblRegienRepSan" for="cmbRegimenRepSan" value="Régimen"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:selectOneMenu id="cmbRegimenRepSan"
										value="#{reporteSanciones.regimen}" effect="fold">
										<f:selectItem itemLabel="Seleccionar" itemValue="0" />
										<f:selectItems value="#{reporteSanciones.regimens}" />
									
									</p:selectOneMenu>
		       				 
    

		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgRegimenReporteSan" for="cmbRegimenRepSan" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
					
					</div>
					
	<br/>
				<p:commandButton id="btnCalcularVacacion"  value="Buscar" onclick="regenererCalSancion()"  actionListener="#{reporteSanciones.BuscarSancionesFiltros()}" update="frmReporteSanciones tblRepSanciones" style="margin-left: 9%;margin-bottom: 1%;"> </p:commandButton>
				<br/>
				<div class="row cells8"> 
				<div class="cell colspan2"><!-- DESGLOCE -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteBigGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblDesgloceRepSan" for="checkDescgloce" value="Desgloce:" rendered="#{!reporteSanciones.anualActv}"/>	
		       				</ui:define>
		       				<ui:define name="valor">
		       				 <p:selectBooleanCheckbox id="checkDescgloce" value="#{reporteSanciones.desgloce}" rendered="#{!reporteSanciones.anualActv}">
            <p:ajax update="tblRepSanciones" />
        </p:selectBooleanCheckbox>
                  
     	
		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       				<p:message id="msgDesgloceReporteSan" for="checkDescgloce" rendered="#{!reporteSanciones.anualActv}" />
		       				</ui:define>
		       				
		       			</ui:decorate>
					</div>
		
				
				</div>
						<div id="divTblReportesSanc" >
	<p:dataTable id="tblRepSanciones" var="listSanc" value="#{reporteSanciones.lstDtSanciones}"
	widgetVar="reportSancTable"  rendered="#{!reporteSanciones.anualActv}" 
	 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
                 paginator="true" rows="10" style="margin-bottom:20px">
                 <f:facet name="{Exporters}">
                <h:commandLink value="Exportar">
        <p:graphicImage name="img/excel.jpg"/>
        <p:dataExporter type="xls" target="tblRepSanciones" fileName="Vacaciones" pageOnly="true"/>
    </h:commandLink>
    
    </f:facet>
                 
			<p:column headerText="N°" style="width: 3%" >
								<h:outputText value="#{listSanc.dtpssnNumaccion}" />
							</p:column>
							<p:column headerText="Cedula" style="width: 8%">
								<h:outputText value="#{listSanc.detallePuesto.fichaEmpleado.persona.prsIdentificacion}" />
							</p:column>
							<p:column headerText="Nombres" >
								<h:outputText value="#{listSanc.detallePuesto.fichaEmpleado.persona.nombresCompetos()}" />
							</p:column>
							<p:column headerText="Falta" rendered="#{reporteSanciones.desgloce}">
								<h:outputText value="#{listSanc.categoriaFalta.falta.flNombre}" />
							</p:column>
							<p:column headerText="Sancion" rendered="#{reporteSanciones.desgloce}">
								<h:outputText value="#{listSanc.sancion.snNombre}" />
							</p:column>
							<p:column headerText="Año" rendered="false">
								<h:outputText value="#{listSanc.dtpssnAno}" />
							</p:column>  
							<p:column headerText="Mes" rendered="false">
								<h:outputText value="#{listSanc.dtpssnMes}" />
							</p:column> 
							<p:column headerText="Días" rendered="#{reporteSanciones.desgloce}">
								<h:outputText value="#{listSanc.dtpssnDias}" />
							</p:column>
							<p:column headerText="valor" style="width: 8%">
								<h:outputText value="#{listSanc.dtpssnValor}" />
							</p:column>
							<p:column headerText="Descripcion" rendered="#{reporteSanciones.desgloce}">
								<h:outputText value="#{listSanc.dtpssnObservacion}" />
							</p:column>
							<p:column headerText="Puesto">
								<h:outputText value="#{listSanc.detallePuesto.puesto.pstDenominacion}" />
							</p:column>
							<p:column headerText="Dependencia" >
								<h:outputText value="#{listSanc.detallePuesto.dependencia.dpnDescripcion}" />
							</p:column>
						       
	</p:dataTable>
	
	</div>
	
	<div id="divTblReporteSancionAnual">
						<p:dataTable var="licencia" rendered="#{reporteSanciones.anualActv}"
							value="#{reporteVacaciones.lstLicencias}"
							widgetVar="reportAuscenTableLic"
	 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
                 paginator="true" rows="10" style="margin-bottom:20px"
							>
							   <f:facet name="{Exporters}">
                <h:commandLink value="Exportar">
        <p:graphicImage name="img/excel.jpg"/>
        <p:dataExporter type="xls" target="reportAuscenTableLic" fileName="Licencias" pageOnly="true"/>
    </h:commandLink>
    </f:facet>
							<p:column headerText="Tipo Licencia">
								<h:outputText value="#{licencia.tipoLicencia.tplcNombre}" />
							</p:column>
							<p:column headerText="Nº días">
								<h:outputText value="#{licencia.lcnNumDias}" />
							</p:column>
							<p:column headerText="Fecha Inicio">
								<h:outputText value="#{licencia.lcnFechaInicio}" />
							</p:column>
							<p:column headerText="Fecha Fin">
								<h:outputText value="#{licencia.lcnFechaFin}" />
							</p:column>
							<p:column headerText="Explicación">
								<h:outputText value="#{licencia.lcnExplicacion}" />
							</p:column>
						</p:dataTable>
					</div>

</div>
	</p:panel>
	</h:form>
	
	</ui:define> 
	</ui:composition>
	
</html>